{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { useState } from 'react';\nimport Head from 'next/head';\nimport Button from '../../components/Button';\nimport Image from '../../components/Image';\nimport QuantityPicker from '../../components/QuantityPicker';\nimport { fetchInventory } from '../../utils/inventoryProvider';\nimport { slugify } from '../../utils/helpers';\nimport CartLink from '../../components/CartLink';\nimport { SiteContext, ContextProviderComponent } from '../../context/mainContext';\n\nconst ItemView = props => {\n  const {\n    0: numberOfitems,\n    1: updateNumberOfItems\n  } = useState(1);\n  const {\n    product\n  } = props;\n  const {\n    price,\n    image,\n    name,\n    description\n  } = product;\n  const {\n    context: {\n      addToCart\n    }\n  } = props;\n\n  function addItemToCart(product) {\n    product[\"quantity\"] = numberOfitems;\n    addToCart(product);\n  }\n\n  function increment() {\n    updateNumberOfItems(numberOfitems + 1);\n  }\n\n  function decrement() {\n    if (numberOfitems === 1) return;\n    updateNumberOfItems(numberOfitems - 1);\n  }\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(CartLink, {}), /*#__PURE__*/_jsxs(Head, {\n      children: [/*#__PURE__*/_jsxs(\"title\", {\n        children: [\"Jamstack ECommerce - \", name]\n      }), /*#__PURE__*/_jsx(\"meta\", {\n        name: \"description\",\n        content: description\n      }), /*#__PURE__*/_jsx(\"meta\", {\n        property: \"og:title\",\n        content: `Jamstack ECommerce - ${name}`\n      }, \"title\")]\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: \" sm:py-12 md:flex-row py-4 w-full flex flex-1 flex-col my-0 mx-auto \",\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: \"w-full md:w-1/2 h-120 flex flex-1 bg-light hover:bg-light-200\",\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"py-16 p10 flex flex-1 justify-center items-center\",\n          children: /*#__PURE__*/_jsx(Image, {\n            src: image,\n            alt: \"Inventory item\",\n            className: \"max-h-full\"\n          })\n        })\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"pt-2 px-0 md:px-10 pb-8 w-full md:w-1/2\",\n        children: [/*#__PURE__*/_jsx(\"h1\", {\n          className: \" sm:mt-0 mt-2 text-5xl font-light leading-large \",\n          children: name\n        }), /*#__PURE__*/_jsxs(\"h2\", {\n          className: \"text-2xl tracking-wide sm:py-8 py-6\",\n          children: [\"$\", price]\n        }), /*#__PURE__*/_jsx(\"p\", {\n          className: \"text-gray-600 leading-7\",\n          children: description\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"my-6\",\n          children: /*#__PURE__*/_jsx(QuantityPicker, {\n            increment: increment,\n            decrement: decrement,\n            numberOfitems: numberOfitems\n          })\n        }), /*#__PURE__*/_jsx(Button, {\n          full: true,\n          title: \"Add to Cart\",\n          onClick: () => addItemToCart(product)\n        })]\n      })]\n    })]\n  });\n};\n\nexport async function getStaticPaths() {\n  const inventory = await fetchInventory();\n  const paths = inventory.map(item => {\n    return {\n      params: {\n        name: slugify(item.name)\n      }\n    };\n  });\n  return {\n    paths,\n    fallback: false\n  };\n}\nexport async function getStaticProps({\n  params\n}) {\n  const name = params.name.replace(/-/g, \" \");\n  const inventory = await fetchInventory();\n  const product = inventory.find(item => slugify(item.name) === slugify(name));\n  return {\n    props: {\n      product\n    }\n  };\n}\n\nfunction ItemViewWithContext(props) {\n  return /*#__PURE__*/_jsx(ContextProviderComponent, {\n    children: /*#__PURE__*/_jsx(SiteContext.Consumer, {\n      children: context => /*#__PURE__*/_jsx(ItemView, _objectSpread(_objectSpread({}, props), {}, {\n        context: context\n      }))\n    })\n  });\n}\n\nexport default ItemViewWithContext;","map":null,"metadata":{},"sourceType":"module"}